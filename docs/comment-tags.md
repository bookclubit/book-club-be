# Семантические комментарии в коде

## Назначение

Код — главный актив проекта, и его сопровождаемость во многом зависит от прозрачности и структуры комментариев. Эта система тегированных комментариев предназначена для:

- Быстрого поиска важных мест, проблем и задач в коде.
- Упорядочивания технического долга и костылей.
- Обеспечения единого стандарта для команды и инструментария (например, TODO Tree).
- Снижения количества «шума» от бессмысленных или устаревших TODO.

Все комментарии с тегами должны помогать разработчикам понимать текущий статус кода и план действий.

---

## Поддерживаемые теги и их смысл

| Тег          | Описание                                                                                      | Обязательность ссылки на задачу            |
|--------------|-----------------------------------------------------------------------------------------------|--------------------------------------------|
| `// INFO`       | Пояснения к нетривиальным участкам кода, не являющиеся проблемами или задачами.              | Нет                                       |
| `// TODO`       | Незавершённая задача или улучшение, требующее доработки.                                   | Обязательно: `#номер_задачи`               |
| `// HACK`       | Временный костыль или обходной путь, который требует замены/исправления.                  | Рекомендуется: ссылка на задачу, если есть |
| `// IMPORTANT`  | Критически важное, неочевидное ограничение или требование, нарушение которого чревато ошибками. | Нет                                       |
| `// FIXME`      | Известная ошибка или дефект кода, требующая исправления.                                  | Обязательно: `#номер_задачи`               |
| `// BUG`        | Документированный баг с описанием и ссылкой на задачу (отдельно от TODO/FIXME).            | Обязательно: `#номер_задачи`               |

---

## Требования к оформлению комментариев

- Все комментарии должны быть краткими, чёткими и содержать максимум полезной информации.
- Текст должен объяснять *почему* выявлено проблемное место или необходимость, а не переписывать код.
- Формат однострочных комментариев:

```js
// TAG [#номер_задачи]: краткое описание задачи или причины
```

- Для более развёрнутых комментариев допускается многострочный формат, начиная с тега, а дальше — пояснение:

```js
// HACK #123: Временный обход ограничения внешнего API.
// Нужно заменить после обновления версии библиотеки.
```

- Для тегов TODO, FIX и BUG обязательна привязка к задаче в трекере — это обеспечивает управляемость и прозрачность.

---

## Политика использования

- Запрещается использование TODO, FIX, HACK без ссылки на тикет (за исключением INFO и IMPORTANT).
- Добавление тега без контекста или описания не допускается.
- Ревью кода строго проверяет эти комментарии на соответствие стандарту.
- Перед релизом команда обязана проводить ревизию списка тегированных комментариев и закрывать выполненные задачи.
- Цель — не превращать репозиторий в кладбище TODO, а поддерживать комментарии актуальными и информативными.

---

## Интеграция с инструментами разработчика

Рекомендуется настроить IDE и плагины (например, [TODO Tree](https://marketplace.visualstudio.com/items?itemName=Gruntfuggly.todo-tree)) для распознавания выбранных тегов:

```JSON
"todo-tree.general.tags": [
        "TODO",
        "FIXME",
        "BUG",
        "HACK",
        "IMPORTANT",
        "INFO"
    ],
    "todo-tree.highlights.customHighlight": {
        "TODO": { "icon": "check", "type": "tag" },
        "FIXME": { "icon": "alert", "type": "tag" },
        "BUG": { "icon": "issue-opened", "type": "tag" },
        "HACK": { "icon": "flame", "type": "tag" },
        "IMPORTANT": { "icon": "star", "type": "tag" },
        "INFO": { "icon": "info", "type": "tag" }
}
```

## Пример комментариев

```js
// INFO: Используем строгий маппинг статусов из-за особенностей API.

// TODO #456: перейти на асинхронный вызов сервиса пользователя.

// HACK #789: временный костыль из-за бага в версии 2.3.0 сторонней библиотеки.
// Нужно убрать после починки и обновления.

// IMPORTANT: менять порядок полей нельзя — контракт с внешним сервисом.

// FIXME #321: исправить ошибку, из-за которой падал импорт.

```